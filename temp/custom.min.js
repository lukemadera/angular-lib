"use strict";angular.module("lib.services",[]),angular.module("lib",["lib.services"]),angular.module("lib.services").factory("libAngular",["libArray","$q","$timeout",function(libArray,$q,$timeout){var inst={formValid:function(form){var valid=!0;for(var xx in form)if(void 0!==form[xx].$valid&&form[xx].$valid!==!0){valid=!1;break}return valid},scopeLoaded:function(params){var deferred=$q.defer(),checkLoaded=function(params){document.getElementById(params.idEle)?deferred.resolve({}):$timeout(function(){checkLoaded(params)},200)};return checkLoaded(params),deferred.promise},removeAngularKeys:function(array1){var newArray=libArray.copyArray(array1,{});return newArray=angular.toJson(newArray),newArray=angular.fromJson(newArray),newArray=this.deleteEmptyFormVals(newArray,{})},deleteEmptyFormVals:function(vals){if("object"==typeof vals){vals=angular.toJson(vals),vals=angular.fromJson(vals);for(var xx in vals)if(vals[xx])if(libArray.isArray(vals[xx],{})){for(var removeIndices=[],ii=0;vals[xx].length>ii;ii++)if("object"==typeof vals[xx][ii]){var atLeastOne=!1;for(var yy in vals[xx][ii]){atLeastOne=!0;break}atLeastOne||(removeIndices[removeIndices.length]=ii)}removeIndices.length>0&&(vals[xx]=libArray.removeIndices(vals[xx],removeIndices,{}))}else vals[xx]=this.deleteEmptyFormVals(vals[xx],{})}return vals},cleanFormVals:function(array1){if(libArray.isArray(array1,{}))for(var ii=0;array1.length>ii;ii++);else for(var xx in array1);}};return inst}]),Array.prototype.remove=function(from,to){var rest=this.slice((to||from)+1||this.length);return this.length=0>from?this.length+from:from,this.push.apply(this,rest)},angular.module("lib.services").factory("libArray",[function(){var inst={toAssociative:function(scalar,params){void 0===params&&(params={}),void 0===params.key&&(params.key="x_key");for(var thisObj=this,arr={},ii=0;scalar.length>ii;ii++){var xx=scalar[ii][params.key];arr[xx]=thisObj.copyArray(scalar[ii]),delete arr[xx][xx]}return arr},toScalar:function(arr,params){void 0===params&&(params={}),void 0===params.key&&(params.key="x_key"),void 0===params.data_key&&(params.data_key="x_data");var thisObj=this,scalar=[],counter=0;for(var xx in arr)scalar[counter]={},"object"==typeof arr[xx]?thisObj.isArray(arr[xx])?(scalar[counter][params.key]=xx,scalar[counter][params.data_key]=thisObj.copyArray(arr[xx])):(scalar[counter]=thisObj.copyArray(arr[xx]),scalar[counter][params.key]=xx):(scalar[counter][params.key]=xx,scalar[counter][params.data_key]=arr[xx]),counter++;return scalar},setKeyVal:function(arrayBase,params){var retArray={arrayBase:"",valid:1,msg:""};return void 0!==params.noDotNotation&&params.noDotNotation||(params.keys=params.keys.split(".")),1==params.keys.length?arrayBase[params.keys[0]]=params.val:2==params.keys.length?arrayBase[params.keys[0]][params.keys[1]]=params.val:3==params.keys.length?arrayBase[params.keys[0]][params.keys[1]][params.keys[2]]=params.val:4==params.keys.length?arrayBase[params.keys[0]][params.keys[1]][params.keys[2]][params.keys[3]]=params.val:5==params.keys.length?arrayBase[params.keys[0]][params.keys[1]][params.keys[2]][params.keys[3]][params.keys[4]]=params.val:6==params.keys.length?arrayBase[params.keys[0]][params.keys[1]][params.keys[2]][params.keys[3]][params.keys[4]][params.keys[5]]=params.val:(retArray.valid=0,retArray.msg="Too deep / too many keys; can only handle key length up to 6"),retArray.arrayBase=arrayBase,retArray},setParentKeys:function(arrayBase,params){var retArray={arrayBase:"",valid:1,msg:""};void 0!==params.noDotNotation&&params.noDotNotation||(params.keys=params.keys.split("."));var keys=params.keys;return keys.length>1&&void 0===arrayBase[keys[0]]&&(arrayBase[keys[0]]={}),keys.length>2&&void 0===arrayBase[keys[0]][keys[1]]&&(arrayBase[keys[0]][keys[1]]={}),keys.length>3&&void 0===arrayBase[keys[0]][keys[1]][keys[2]]&&(arrayBase[keys[0]][keys[1]][keys[2]]={}),keys.length>4&&void 0===arrayBase[keys[0]][keys[1]][keys[2]][keys[3]]&&(arrayBase[keys[0]][keys[1]][keys[2]][keys[3]]={}),keys.length>5&&void 0===arrayBase[keys[0]][keys[1]][keys[2]][keys[3]][keys[4]]&&(arrayBase[keys[0]][keys[1]][keys[2]][keys[3]][keys[4]]={}),keys.length>6?void 0===arrayBase[keys[0]][keys[1]][keys[2]][keys[3]][keys[4]][keys[5]]&&(arrayBase[keys[0]][keys[1]][keys[2]][keys[3]][keys[4]][keys[5]]={}):(retArray.valid=0,retArray.msg="Too deep / too many keys; can only handle key length up to 6"),retArray.arrayBase=arrayBase,retArray},evalArray:function(arrayBase,params){var retArray={val:"",valid:1,msg:""};return void 0!==params.noDotNotation&&params.noDotNotation||(params.keys=params.keys.split(".")),1==params.keys.length?void 0!==arrayBase[params.keys[0]]&&(retArray.val=arrayBase[params.keys[0]]):2==params.keys.length?void 0!==arrayBase[params.keys[0]]&&(retArray.val=arrayBase[params.keys[0]][params.keys[1]]):3==params.keys.length?void 0!==arrayBase[params.keys[0]]&&void 0!==arrayBase[params.keys[0]][params.keys[1]]&&(retArray.val=arrayBase[params.keys[0]][params.keys[1]][params.keys[2]]):4==params.keys.length?void 0!==arrayBase[params.keys[0]]&&void 0!==arrayBase[params.keys[0]][params.keys[1]]&&void 0!==arrayBase[params.keys[0]][params.keys[1]][params.keys[2]]&&(retArray.val=arrayBase[params.keys[0]][params.keys[1]][params.keys[2]][params.keys[3]]):5==params.keys.length?void 0!==arrayBase[params.keys[0]]&&void 0!==arrayBase[params.keys[0]][params.keys[1]]&&void 0!==arrayBase[params.keys[0]][params.keys[1]][params.keys[2]]&&void 0!==arrayBase[params.keys[0]][params.keys[1]][params.keys[2]][params.keys[3]]&&(retArray.val=arrayBase[params.keys[0]][params.keys[1]][params.keys[2]][params.keys[3]][params.keys[4]]):6==params.keys.length?void 0!==arrayBase[params.keys[0]]&&void 0!==arrayBase[params.keys[0]][params.keys[1]]&&void 0!==arrayBase[params.keys[0]][params.keys[1]][params.keys[2]]&&void 0!==arrayBase[params.keys[0]][params.keys[1]][params.keys[2]][params.keys[3]]&&void 0!==arrayBase[params.keys[0]][params.keys[1]][params.keys[2]][params.keys[3]][params.keys[4]]&&(retArray.val=arrayBase[params.keys[0]][params.keys[1]][params.keys[2]][params.keys[3]][params.keys[4]][params.keys[5]]):(retArray.valid=0,retArray.msg="Too deep / too many keys; can only handle key length up to 6"),retArray},isArray:function(array1){return"[object Array]"===Object.prototype.toString.apply(array1)?!0:!1},overwrite:function(oldArray,newArray,params){params||(params={});var ii,xx,len1,len2,result;if(this.isArray(oldArray)&&this.isArray(newArray)){for(result=[],len1=oldArray.length,len2=newArray.length,ii=0;len1>ii;ii++)result[ii]=void 0!==newArray[ii]?"object"==typeof newArray[ii]?this.copyArray(newArray[ii]):newArray[ii]:"object"==typeof oldArray[ii]?this.copyArray(oldArray[ii]):oldArray[ii];if(len2>len1)for(ii=len1;len2>ii;ii++)void 0!==newArray[ii]&&(result[ii]="object"==typeof newArray[ii]?this.copyArray(newArray[ii]):newArray[ii])}else if(this.isArray(oldArray)||this.isArray(newArray))console.log("Error in libArray.overwrite: Array structures do not match! Either both arrays must be scalar or both associative.");else{result={};for(xx in oldArray)result[xx]=void 0!==newArray[xx]?"object"==typeof newArray[xx]?this.copyArray(newArray[xx]):newArray[xx]:"object"==typeof oldArray[xx]?this.copyArray(oldArray[xx]):oldArray[xx];for(xx in newArray)void 0===result[xx]&&(result[xx]="object"==typeof newArray[xx]?this.copyArray(newArray[xx]):newArray[xx])}return result},extend:function(oldArray,newArray,params){var thisObj=this;if(params||(params={}),this.isArray(newArray)&&0===newArray.length)return this.copyArray(oldArray);if(this.isEmpty(newArray)===!0)return this.copyArray(oldArray);var recursor=function(oldArray,newArray,params){var ii,xx,len1,len2,result;if(thisObj.isArray(oldArray)&&thisObj.isArray(newArray)){if(result=[],len1=oldArray.length,len2=newArray.length,0===len2)return thisObj.copyArray(newArray);for(ii=0;len1>ii;ii++)result[ii]=void 0!==newArray[ii]?"object"==typeof newArray[ii]?"object"==typeof oldArray[ii]?recursor(oldArray[ii],newArray[ii],params):thisObj.copyArray(newArray[ii]):newArray[ii]:"object"==typeof oldArray[ii]?thisObj.copyArray(oldArray[ii]):oldArray[ii];if(len2>len1)for(ii=len1;len2>ii;ii++)void 0!==newArray[ii]&&(result[ii]="object"==typeof newArray[ii]?thisObj.copyArray(newArray[ii]):newArray[ii])}else if(thisObj.isArray(oldArray)||thisObj.isArray(newArray))console.log("Error in extendArray: Array structures do not match! Either both arrays must be scalar or both associative. This also applies to all sub-arrays that are defined in both arrays.");else{if(result={},thisObj.isEmpty(newArray)===!0)return thisObj.copyArray(newArray);for(xx in oldArray)result[xx]=void 0!==newArray[xx]?"object"==typeof newArray[xx]?"object"==typeof oldArray[xx]?recursor(oldArray[xx],newArray[xx],params):thisObj.copyArray(newArray[xx]):newArray[xx]:"object"==typeof oldArray[xx]?thisObj.copyArray(oldArray[xx]):oldArray[xx];for(xx in newArray)void 0===result[xx]&&(result[xx]="object"==typeof newArray[xx]?thisObj.copyArray(newArray[xx]):newArray[xx])}return result};return recursor(oldArray,newArray,params)},isEmpty:function(obj){for(var key in obj)if(obj.hasOwnProperty(key))return!1;return!0},convertStructure:function(selectVals){var xx,thisObj=this,finalArray={};if(this.isArray(selectVals)){finalArray={};for(var ii=0;selectVals.length>ii;ii++)if("object"!=typeof selectVals[ii])val=""+selectVals[ii],finalArray[val]={name:val};else{var val=selectVals[ii].value;finalArray[val]={};for(xx in selectVals[ii])"value"!=xx&&(finalArray[val][xx]=selectVals[ii][xx])}return finalArray}finalArray={};for(xx in selectVals)if("object"!=typeof selectVals[xx]){finalArray[xx]={};var trimmedVal=selectVals[xx].replace(/^\s\s*/,"").replace(/\s\s*$/,"");finalArray[xx].name=trimmedVal.length>0?selectVals[xx]:xx}else{finalArray[xx]=thisObj.copyArray(selectVals[xx],{});var foundName=!1;for(var yy in selectVals[xx])if("name"==yy){foundName=!0;break}foundName===!1&&(finalArray[xx].name=xx)}return finalArray},valExistsCheck:function(array1,val){var iiDup,duplicateVal=!1;for(iiDup=0;array1.length>iiDup;iiDup++)if(array1[iiDup]==val){duplicateVal=!0;break}return duplicateVal},keyExists:function(array1,key){for(var match=!1,ii=0;array1.length>ii;ii++)if(array1[ii]==key){match=!0;break}return match},copyArray:function(array1,params){var newArray,aa;if(!array1)return array1;if(params||(params={}),params.skipKeys&&void 0!==params.skipKeys||(params.skipKeys=[]),"object"!=typeof array1)return array1;if(this.isArray(array1))for(newArray=[],aa=0;array1.length>aa;aa++)newArray[aa]=array1[aa]&&"object"==typeof array1[aa]?this.copyArray(array1[aa],params):array1[aa];else{newArray={};for(aa in array1){for(var goTrig=!0,ss=0;params.skipKeys.length>ss;ss++)if(params.skipKeys[ss]==aa){goTrig=!1;break}goTrig&&(newArray[aa]=array1[aa]&&"object"==typeof array1[aa]?this.copyArray(array1[aa],params):array1[aa])}}return newArray},sort2D:function(arrayUnsorted,column,params){var ii,tempArray=[],array2D=[];for(ii=0;arrayUnsorted.length>ii;ii++)tempArray[ii]=[],tempArray[ii]=arrayUnsorted[ii],array2D[ii]=[ii,tempArray[ii][column]];array2D=this.subSort2D(array2D);var sortedArray=[],counter=0;if(void 0!==params.order&&"desc"==params.order)for(ii=array2D.length-1;ii>=0;ii--)sortedArray[counter]=tempArray[array2D[ii][0]],counter++;else for(ii=0;array2D.length>ii;ii++)sortedArray[counter]=tempArray[array2D[ii][0]],counter++;return sortedArray},subSort2D:function(array1){var left,right,beg=[],end=[],pivot=[];pivot[0]=[],pivot[0][0]=[],pivot[0][1]=[],pivot[1]=[],pivot[1][0]=[],pivot[1][1]=[];var count=0;for(beg[0]=0,end[0]=array1.length;count>=0;)if(left=beg[count],right=end[count]-1,right>left){for(pivot[0][1]=array1[left][1],pivot[0][0]=array1[left][0];right>left;){for(;array1[right][1]>=pivot[0][1]&&right>left;)right--;for(right>left&&(array1[left][0]=array1[right][0],array1[left][1]=array1[right][1],left++);array1[left][1]<=pivot[0][1]&&right>left;)left++;right>left&&(array1[right][0]=array1[left][0],array1[right][1]=array1[left][1],right--)}array1[left][0]=pivot[0][0],array1[left][1]=pivot[0][1],beg[count+1]=left+1,end[count+1]=end[count],end[count]=left,count++}else count--;return array1},removeIndices:function(array1,indices){for(var newArray=[],newArrayCounter=0,ii=0;array1.length>ii;ii++){for(var match=!1,jj=0;indices.length>jj;jj++)if(indices[jj]==ii){match=!0;break}match||(newArray[newArrayCounter]=this.copyArray(array1[ii]),newArrayCounter++)}return newArray},findArrayIndex:function(array,key,val,params){var ii,index=-1;if(params.oneD){for(ii=0;array.length>ii;ii++)if(array[ii]==val){index=ii;break}}else for(ii=0;array.length>ii;ii++)if(array[ii][key]==val){index=ii;break}return index}};return inst}]),angular.module("lib.services").provider("libCookie",[function(){this.set=function(c_name,value,exdays){var exdate=new Date;exdate.setDate(exdate.getDate()+exdays);var c_value=escape(value)+(null===exdays?"":"; expires="+exdate.toUTCString()+"; path=/");document.cookie=c_name+"="+c_value},this.clear=function(c_name){document.cookie=encodeURIComponent(c_name)+"=deleted; expires="+new Date(0).toUTCString()+"; path=/"},this.get=function(c_name){var ii,xx,yy,ARRcookies=document.cookie.split(";");for(ii=0;ARRcookies.length>ii;ii++)if(xx=ARRcookies[ii].substr(0,ARRcookies[ii].indexOf("=")),yy=ARRcookies[ii].substr(ARRcookies[ii].indexOf("=")+1),xx=xx.replace(/^\s+|\s+$/g,""),xx==c_name)return unescape(yy);return!1},this.$get=function(){return{set:this.set,clear:this.clear,get:this.get}}}]),angular.module("lib.services").factory("libFacebookAuth",["libFxnCallback","$rootScope",function(libFxnCallback,$rootScope){var inst={inited:!1,fbCookie:{},alreadyFBInited:!1,fbAppId:!1,fbPerms:"email,user_birthday",fbConnectTrig:!1,init:function(){this.inited=!0},setFBOpts:function(fbId,params){this.fbAppId=fbId,params.fbPerms&&(this.fbPerms=params.fbPerms)},destroy:function(){this.fbConnectTrig=!1,this.alreadyFBInited=!1,this.fbCookie={},this.inited=!1},fbLoginInit:function(params){if(this.inited||this.init({}),params.fbAppId||params.fbPerms){var fbAppId=!1,ppSend={};params.fbAppId&&(fbAppId=params.fbAppId),params.fbPerms&&(ppSend.fbPerms=params.fbPerms),this.setFBOpts(fbAppId,ppSend)}var thisObj=this;void 0===window.FB||this.alreadyFBInited||(this.alreadyFBInited=!0,window.globalPhoneGap&&globalPhoneGap?("undefined"==typeof PhoneGap&&"undefined"==typeof cordova&&"undefined"==typeof Cordova&&alert("PhoneGap/Cordova variable does not exist. Check that you have included phonegap.js (or cordova.js) correctly"),"undefined"==typeof PG&&"undefined"==typeof CDV&&alert("PG/CDV variable does not exist. Check that you have included pg-plugin-fb-connect.js (or cdv-plugin-fb-connect.js) correctly"),"undefined"==typeof FB&&alert("FB variable does not exist. Check that you have included the Facebook JS SDK file."),"undefined"==typeof CDV?FB.init({appId:thisObj.fbAppId,frictionlessRequests:!0,nativeInterface:PG.FB}):FB.init({appId:thisObj.fbAppId,frictionlessRequests:!0,nativeInterface:CDV.FB})):FB.init({appId:thisObj.fbAppId,frictionlessRequests:!0,status:!0,cookie:!0,xfbml:!0}))},showFBLogin:function(params){var thisObj=this;params.FBLoggedOut=!0;var needToLogOut=!1;this.fbConnectTrig&&(FB.getLoginStatus(function(response){response.authResponse&&(needToLogOut=!0)}),needToLogOut&&FB.logout(function(){thisObj.preLoginFB(params)})),needToLogOut||thisObj.preLoginFB(params)},preLoginFB:function(params){var thisObj=this,needToLogIn=!0;params.alreadyLoggedIn?needToLogIn=!1:(window.FB&&void 0===params.FBLoggedOut||!params.FBLoggedOut)&&FB.getLoginStatus(function(response){(response.authResponse||response.session)&&(params.response=response,needToLogIn=!1)}),needToLogIn===!1?this.loginFB(params):FB.login(function(response){(response.authResponse||response.session)&&(params.response=response,thisObj.loginFB(params))},{scope:thisObj.fbPerms})},setFBLoginVars:function(params){this.fbConnectTrig=!0;var map1={userID:"uid",accessToken:"access_token",expiresIn:"expires"};for(var xx in params.fbSessInfo)this.fbCookie[xx]=params.fbSessInfo[xx],map1[xx]&&(this.fbCookie[map1[xx]]=params.fbSessInfo[xx])},loginFB:function(params){var xx,fbLoginVarsParams={},sessInfo={},dataString="fbLogin=1";if(params.response&&params.response.session||void 0!==FB.getAuthResponse&&FB.getAuthResponse()){if(params.response&&params.response.session){var sessInfoOld=params.response.session;sessInfo={};var map1={uid:"userID",access_token:"accessToken",expires:"expiresIn"};for(xx in sessInfoOld)map1[xx]?sessInfo[map1[xx]]=sessInfoOld[xx]:sessInfo[xx]=sessInfoOld[xx]}else sessInfo=FB.getAuthResponse();dataString+="&fbUserId="+sessInfo.userID;for(xx in sessInfo)dataString+="&fbCookie["+xx+"]="+sessInfo[xx],fbLoginVarsParams[xx]=sessInfo[xx]}this.setFBLoginVars({fbSessInfo:fbLoginVarsParams});var argsToAdd=[this.fbCookie],args=libFxnCallback.formArgs({args:params.callback.args,argsToAdd:argsToAdd});$rootScope.$broadcast(params.callback.evtName,args),$rootScope.$$phase||$rootScope.$apply()}};return inst}]),angular.module("lib.services").factory("libFeatureSupported",["libArray",function(libArray){var inst={html5Support:{svg:!1,localStorage:!1,offline:!1,history:!1,webWorkers:!1,dragNDrop:!1,fileAPI:!1,geolocation:!1,inputTypes:{},socket:!0},browser:!1,device:!1,deviceVersion:!1,touch:!1,orientation:!1,platforms:{phonegap:!1,facebook:!1},inited:!1,init:function(params){this.inited=!0;var atLeastOne=!1;for(var xx in params){atLeastOne=!0;break}var defaults={};defaults=atLeastOne?{html5:!1,phonegap:!1,device:!1}:{html5:!0,phonegap:!0,device:!0},params=libArray.extend(defaults,params,{}),this.touch="ontouchend"in document,this.orientation="onorientationchange"in window,params.html5&&this.html5Check(params),params.device&&(this.device=this.getDevice({})),params.phonegap&&window.globalPhoneGap&&globalPhoneGap&&(this.platforms.phonegap=!0),this.platforms.phonegap&&(this.html5Support.socket=!1)},html5Check:function(params){this.inited||this.init({});var e=document.createElement("div");e.innerHTML="<svg></svg>",this.html5Support.svg=!!(window.SVGSVGElement&&e.firstChild instanceof window.SVGSVGElement),this.html5Support.dragNDrop="draggable"in document.createElement("span"),this.html5Support.fileAPI="undefined"!=typeof FileReader,this.html5Support.geolocation=!!navigator.geolocation,this.html5Support.history=!(!window.history||!window.history.pushState);try{this.html5Support.localStorage="localStorage"in window&&null!==window.localStorage}catch(err){this.html5Support.localStorgae=!1}this.html5Support.offline=!!window.applicationCache,this.html5Support.webWorkers=!!window.Worker;var html="",alertIt=!1;for(var xx in this.html5Support);alertIt===!0&&alert(html),this.checkInputTypes(params)},checkInputTypes:function(){this.inited||this.init({});for(var inputs=["search","tel","url","email","datetime","date","month","week","time","datetime-local","number","color","range"],len=inputs.length,ii=0;len>ii;ii++){var input=document.createElement("input");input.setAttribute("type",inputs[ii]);var notText="text"!==input.type;this.html5Support.inputTypes[inputs[ii]]=!1,notText&&"search"!==input.type&&"tel"!==input.type&&(input.value="testing","testing"!==input.value&&(this.html5Support.inputTypes[inputs[ii]]=!0))}},html5:function(feature){this.inited||this.init({});var valid=!1;return void 0!==this.html5Support[feature]&&(valid=this.html5Support[feature]),valid},getBrowser:function(){return this.inited||this.init({}),this.browser||(this.browser={},this.browser.type=navigator.userAgent.match(/WebKit/)?"webkit":navigator.userAgent.match(/Firefox/)?"moz":""),this.browser},getDevice:function(){if(this.inited||this.init({}),!this.device){var ua=navigator.userAgent.toLowerCase(),isAndroid=ua.indexOf("android")>-1;isAndroid&&(this.device="android",this.deviceVersion=parseFloat(ua.slice(ua.indexOf("android")+8)));var iOS=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1;iOS&&(this.device="iOS")}return this.device},update:function(params){this.inited||this.init({}),params.facebook&&(this.platforms.facebook=!0)}};return inst.init(),inst}]),angular.module("lib.services").factory("libFxnCallback",["$rootScope",function($rootScope){var inst={formArgs:function(params){params.args&&void 0!==params.args?void 0===params.args.length&&(params.args=[params.args]):params.args=[],params.argsToAdd&&void 0!==params.argsToAdd||(params.argsToAdd=[]);var args1=params.args.concat(params.argsToAdd);return 1==args1.length&&(args1=args1[0]),args1},doCallback:function(evtName,args){$rootScope.$$phase?$rootScope.$broadcast(evtName,args):$rootScope.$apply(function(){$rootScope.$broadcast(evtName,args)})}};return inst}]),angular.module("lib.services").factory("libGoogleAuth",["libFxnCallback","$rootScope","$http","$q",function(libFxnCallback,$rootScope,$http,$q){var inst={inited:!1,token:{},googleInfo:{client_id:!1,scope:"https://www.googleapis.com/auth/plus.login"},scopeMap:{login:"https://www.googleapis.com/auth/plus.login",email:"https://www.googleapis.com/auth/userinfo.email https://www.google.com/m8/feeds",contacts:"https://www.google.com/m8/feeds"},init:function(params){this.setGoogleOpts(params)},setGoogleOpts:function(params){var ii;params.client_id&&(this.googleInfo.client_id=params.client_id);var scope="";if(params.scope?scope=params.scope:params.scopeHelp||(scope=this.googleInfo.scope),params.scopeHelp){var scopeMap=this.scopeMap;for(scope+=" ",ii=0;params.scopeHelp.length>ii;ii++)scopeMap[params.scopeHelp[ii]]&&(scope+=scopeMap[params.scopeHelp[ii]]+" ")}this.googleInfo.scope=scope},destroy:function(){this.googleInfo={client_id:!1,scope:"https://www.googleapis.com/auth/plus.login"},this.token={},this.inited=!1},login:function(params){var thisObj=this,config={scope:this.googleInfo.scope,client_id:this.googleInfo.client_id};gapi.auth.authorize(config,function(){var googleToken=gapi.auth.getToken();if(thisObj.token=googleToken,params.returnVals={token:googleToken},void 0!==params.extraInfo&&params.extraInfo.user_id||params.extraInfo.emails){$http.defaults.headers.common["X-Requested-With"]=void 0;var url="https://www.googleapis.com/plus/v1/people/me?access_token="+encodeURIComponent(googleToken.access_token);$http.get(url).success(function(data){if(params.returnVals.extraInfo={user_id:data.id},params.extraInfo.emails)if(params.returnVals.extraInfo.emails=!1,void 0!==data.emails)params.returnVals.extraInfo.emails=data.emails,thisObj.loginCallback(params);else{var promise=thisObj.getContacts({emailOnly:!0});promise.then(function(data){params.returnVals.extraInfo.emails=[{value:data.email,type:"",primary:!0}],thisObj.loginCallback(params)},function(){thisObj.loginCallback(params)})}else thisObj.loginCallback(params)}).error(function(){console.log("error retrieving Google info"),thisObj.loginCallback(params)})}else thisObj.loginCallback(params)})},loginCallback:function(params){if(params.returnVals.extraInfo.emails&&params.returnVals.extraInfo.emails.length>0){var retVal=this.pullPrimary(params.returnVals.extraInfo.emails,{valueKey:"value"});retVal&&(params.returnVals.extraInfo.emailPrimary=retVal)}var argsToAdd=[params.returnVals],args=libFxnCallback.formArgs({args:params.callback.args,argsToAdd:argsToAdd});$rootScope.$broadcast(params.callback.evtName,args),$rootScope.$$phase||$rootScope.$apply()},getContacts:function(opts){opts||(opts={});var thisObj=this,deferred=$q.defer(),googleToken=this.token,maxResults=3e3;opts.emailOnly&&(maxResults=1),$http.defaults.headers.common["X-Requested-With"]=void 0;var url="https://www.google.com/m8/feeds/contacts/default/full?access_token="+encodeURIComponent(googleToken.access_token)+"&alt=json&max-results="+maxResults;return $http.get(url).success(function(data){if(opts.emailOnly)deferred.resolve({email:data.feed.id.$t});else{var ii,vals,tempVal,contacts=[];for(ii=0;data.feed.entry.length>ii;ii++)vals={email:!1,name:!1,phone:!1},data.feed.entry[ii].gd$email&&(tempVal=thisObj.pullPrimary(data.feed.entry[ii].gd$email,{valueKey:"address"}),tempVal&&(vals.email=tempVal)),data.feed.entry[ii].gd$phoneNumber&&(tempVal=thisObj.pullPrimary(data.feed.entry[ii].gd$phoneNumber,{valueKey:"$t"}),tempVal&&(vals.phone=tempVal)),data.feed.entry[ii].title&&(vals.name=data.feed.entry[ii].title.$t),contacts[ii]=vals;deferred.resolve({contacts:contacts})}}).error(function(){var msg="error retrieving Google contacts";console.log(msg),deferred.reject({msg:msg})}),deferred.promise},pullPrimary:function(items,opts){var ii,valueKey="value",retVal=!1;opts.valueKey&&(valueKey=opts.valueKey);var found=!1;for(ii=0;items.length>ii;ii++)if(void 0!==opts.matchKey&&void 0!==opts.matchVal){if(void 0!==items[ii][opts.matchKey]&&items[ii][opts.matchKey]==opts.matchVal){retVal=items[ii][valueKey],found=!0;break}}else if(items[ii].primary||"true"==items[ii].primary){retVal=items[ii][valueKey],found=!0;break}return!found&&items.length>0&&(retVal=items[0][valueKey]),retVal}};return inst}]),angular.module("lib.services").factory("libLoading",[function(){var inst={inited:!1,idPart:"libLoading",ids:{bodyDiv:!1,full:!1,mini:!1},init:function(){var thisObj=this;this.ids.bodyDiv||(this.ids.bodyDiv=this.idPart+"BodyDiv",this.ids.mini=this.idPart+"Mini",this.ids.full=this.idPart+"Full"),$(window).resize(function(){thisObj.resize()}),$(window).scroll(function(){thisObj.scroll({})}),this.inited=!0},show:function(params){void 0===params&&(params={});var defaults={type:"mini"};params=$.extend({},defaults,params),this.inited||this.init();var divId=this.ids.bodyDiv;if(!$("#"+divId).length){var html="";html+="<div id='"+divId+"' class='l-loading-background'>",html+="<div id='"+this.ids.mini+"' class='l-loading-background-inner'>",html+="<div class='l-loading-mini-background-inner'>",html+="<div class='l-loading-mini-icon'></div>",html+="</div>",html+="</div>",html+="<div id='"+this.ids.full+"' class='l-loading-background-inner'>",html+="<div class='l-loading-full-background-inner'>",html+="<div class='l-loading-full-content'>Loading..</div>",html+="</div>",html+="</div>",html+="</div>",$("body").append(html)}$("#"+divId).show(),"full"==params.type?($("#"+this.ids.full).show(),$("#"+this.ids.mini).hide()):($("#"+this.ids.mini).show(),$("#"+this.ids.full).hide()),this.resize(),params.callback&&setTimeout(function(){params.callback()},40)},close:function(){var thisObj=this,divId=thisObj.ids.bodyDiv;$("#"+divId).hide()},destroy:function(){var divId=this.ids.bodyDiv;$("#"+divId).remove()},resize:function(){var windowHeight=$(window).height(),windowWidth=$(window).width(),windowTop=$(window).scrollTop();$("#"+this.ids.bodyDiv).height(windowHeight),$("#"+this.ids.bodyDiv).width(windowWidth),$("#"+this.ids.bodyDiv).css({top:windowTop+"px"})},scroll:function(){var windowTop=$(window).scrollTop();$("#"+this.ids.bodyDiv).css({top:windowTop+"px"})}};return inst}]),angular.module("lib.services").factory("libResize",["$rootScope","libFxnCallback","libArray",function($rootScope,libFxnCallback,libArray){var inst={callbacks:{},timeout:!1,init:function(params){var thisObj=this,defaults={timeout:500};params=libArray.extend(defaults,params,{}),window.onresize=function(){thisObj.timeout||(thisObj.timeout=setTimeout(function(){thisObj.resize({}),clearTimeout(thisObj.timeout),thisObj.timeout=!1},params.timeout))}},destroy:function(){},resize:function(){var thisObj=this,argsToAdd=[];for(var xx in this.callbacks){var args=libFxnCallback.formArgs({args:this.callbacks[xx].args,argsToAdd:argsToAdd});$rootScope.$broadcast(thisObj.callbacks[xx].evtName,args)}$rootScope.$$phase||$rootScope.$apply()},addCallback:function(fxnId,fxnInfo){this.callbacks[fxnId]=fxnInfo},removeCallback:function(fxnId){this.callbacks[fxnId]&&void 0!==this.callbacks[fxnId]&&delete this.callbacks[fxnId]}};return inst.init(),inst}]),angular.module("lib.services").factory("libString",["libArray",function(libArray){var inst={parseUrl:function(params){var xx,ret={page:"",queryParams:""},defaults={rootPath:""};for(xx in defaults)void 0===params[xx]&&(params[xx]=defaults[xx]);var appPath=params.rootPath,curUrl=params.url,posSlashes=curUrl.indexOf("://");curUrl=curUrl.slice(posSlashes+3,curUrl.length);var pos1=curUrl.indexOf(appPath),curPage=curUrl.slice(pos1+appPath.length,curUrl.length),posHash=curPage.indexOf("#/");posHash>-1&&(curPage=curPage.slice(posHash+2,curPage.length));var posQuery=curPage.indexOf("?"),queryParams="";return posQuery>-1&&(queryParams=curPage.slice(posQuery,curPage.length),curPage=curPage.slice(0,posQuery)),ret.page=curPage,ret.queryParams=queryParams,ret},addFileSuffix:function(filename,suffix){if(void 0===filename||!filename||filename.indexOf(suffix)>-1)return filename;var front=filename.substring(0,filename.lastIndexOf(".")),end=filename.substring(filename.lastIndexOf("."));return front+suffix+end},escapeHtml:function(html){var htmlNew=html.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");return htmlNew},trim:function(string1){return string1.replace(/^\s+|\s+$/g,"")},random:function(len,pp){var defaults={type:"full"};pp=libArray.extend(defaults,pp,{});var chars;"full"==pp.type?chars="abcdefghijkmnopqrstuvwxyz023456789ABCDEFGHIJKLMNOPQRSTUVWXYZ":"readable"==pp.type&&(chars="abcdefghijkmnopqrstuvwxyz023456789");for(var randString="",ii=0;len>ii;ii++)randString+=chars.charAt(Math.floor(Math.random()*chars.length));return randString}};return inst}]),angular.module("lib.services").directive("libSwipe",["libSwipe",function(libSwipe){return{restrict:"A",scope:{onswipe:"&"},compile:function(element,attrs){return attrs.id="libSwipe"+Math.random().toString(36).substring(7),element.attr("id",attrs.id),function(scope,element,attrs){function setSwipe(curDirection){return function(){libSwipe.setSwipe("#"+attrs.id,curDirection,{fxn:function(){void 0!==scope.onswipe&&void 0!==scope.onswipe()&&"function"==typeof scope.onswipe()&&scope.onswipe()({direction:curDirection})}})}}var ii,directions=JSON.parse(attrs.directions);for(ii=0;directions.length>ii;ii++)setSwipe(directions[ii])}}}}]).factory("libSwipe",["libFeatureSupported",function(libFeatureSupported){var inst={setSwipe:function(selector,direction,params){libFeatureSupported.touch&&$(selector).length&&("left"==direction?($(selector).unbind("swipeleft"),$(selector).swipeleft(function(){params.fxn()})):"right"==direction?($(selector).unbind("swiperight"),$(selector).swiperight(function(){params.fxn()})):"up"==direction?($(selector).unbind("swipeup"),$(selector).swipeup(function(){params.fxn()})):"down"==direction&&($(selector).unbind("swipedown"),$(selector).swipedown(function(){params.fxn()})))}};return inst}]);